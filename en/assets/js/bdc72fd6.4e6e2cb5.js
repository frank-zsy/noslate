"use strict";(self.webpackChunknoslate_website=self.webpackChunknoslate_website||[]).push([[8634],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>b});var l=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,l,r=function(e,n){if(null==e)return{};var t,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var d=l.createContext({}),u=function(e){var n=l.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=u(e.components);return l.createElement(d.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},g=l.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,d=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),g=u(t),b=r,c=g["".concat(d,".").concat(b)]||g[b]||p[b]||a;return t?l.createElement(c,o(o({ref:n},s),{},{components:t})):l.createElement(c,o({ref:n},s))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,o=new Array(a);o[0]=g;var i={};for(var d in n)hasOwnProperty.call(n,d)&&(i[d]=n[d]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var u=2;u<a;u++)o[u]=t[u];return l.createElement.apply(null,o)}return l.createElement.apply(null,t)}g.displayName="MDXCreateElement"},9696:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var l=t(7462),r=(t(7294),t(3905));const a={},o="Debug with Linux",i={unversionedId:"debugger/andb/env_linux",id:"debugger/andb/env_linux",title:"Debug with Linux",description:"System dependencies",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/debugger/andb/env_linux.md",sourceDirName:"debugger/andb",slug:"/debugger/andb/env_linux",permalink:"/en/docs/debugger/andb/env_linux",draft:!1,editUrl:"https://github.com/noslate-project/noslate/tree/main/site/docs/debugger/andb/env_linux.md",tags:[],version:"current",frontMatter:{},sidebar:"debugger",previous:{title:"Andb",permalink:"/en/docs/debugger/andb/intro"},next:{title:"Debugging with MacOS",permalink:"/en/docs/debugger/andb/env_macos"}},d={},u=[{value:"System dependencies",id:"system-dependencies",level:2},{value:"How to get gdb version",id:"how-to-get-gdb-version",level:3},{value:"lldb version",id:"lldb-version",level:3},{value:"Prepare the debugging environment",id:"prepare-the-debugging-environment",level:2},{value:"Set up the gdb debugging environment",id:"set-up-the-gdb-debugging-environment",level:3},{value:"Use precompiled andb-gdb",id:"use-precompiled-andb-gdb",level:2},{value:"CentOS 7",id:"centos-7",level:4},{value:"Set up the lldb debugging environment",id:"set-up-the-lldb-debugging-environment",level:3},{value:"CentOS 7",id:"centos-7-1",level:4},{value:"Configuration tool",id:"configuration-tool",level:2},{value:"General debugging",id:"general-debugging",level:2},{value:"Manual tuning method",id:"manual-tuning-method",level:2}],s={toc:u};function p(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,l.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"debug-with-linux"},"Debug with Linux"),(0,r.kt)("h2",{id:"system-dependencies"},"System dependencies"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Python 2 or 3 "),(0,r.kt)("li",{parentName:"ul"},"GDB 8.3+"),(0,r.kt)("li",{parentName:"ul"},"LLDB 7.0+")),(0,r.kt)("h3",{id:"how-to-get-gdb-version"},"How to get gdb version"),(0,r.kt)("p",null,"Check the current system gdb version"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"gdb --version\nGNU gdb (GDB) 10.2\n")),(0,r.kt)("p",null,"Check the python version used by gdb"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$gdb\n(gdb) pi\n>>> import sys\n>>> print(sys.version)\n2.7.5 (default, Nov 11 2020, 14:14:29)\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\n")),(0,r.kt)("h3",{id:"lldb-version"},"lldb version"),(0,r.kt)("p",null,"\u68c0\u67e5\u5f53\u524d\u7cfb\u7edf lCheck the current system lldb versionldb \u7248\u672c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"lldb -version\nlldb version 7.0.1\n")),(0,r.kt)("p",null,"Check the python version used by lldb"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$lldb\n(lldb) sc\nPython Interactive Interpreter. To exit, type 'quit()', 'exit()' or Ctrl-D.\n>>> import sys\n>>> print(sys.version)\n2.7.5 (default, Nov 11 2020, 14:14:29)\n[GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]\n>>>\n")),(0,r.kt)("h2",{id:"prepare-the-debugging-environment"},"Prepare the debugging environment"),(0,r.kt)("p",null,"If your Linux system does not meet the above requirements, you need to install it first"),(0,r.kt)("h3",{id:"set-up-the-gdb-debugging-environment"},"Set up the gdb debugging environment"),(0,r.kt)("h2",{id:"use-precompiled-andb-gdb"},"Use precompiled andb-gdb"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"andb-gdb")," is a multi-platform precompiled gdb tool, the current version is ",(0,r.kt)("inlineCode",{parentName:"p"},"10.2"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$git clone git@github.com:noslate-project/andb-gdb.git\n\n# Also need to add the gdb environment variable\n$cd andb-gdb\n$source env.sh\nx86_64-Linux\n")),(0,r.kt)("h4",{id:"centos-7"},"CentOS 7"),(0,r.kt)("p",null,"The default version of gdb installed on CentOS 7 is ",(0,r.kt)("inlineCode",{parentName:"p"},"7.4"),",\nIt is recommended to use gdb from the devtoolset-9 package in the Software Collections (SCL), version ",(0,r.kt)("inlineCode",{parentName:"p"},"8.3-3.el7")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# install devtoolset-9-gdb package with yu\n$yum install devtoolset-9-gdb\n\n# use devtoolset-9 \n$source /opt/rh/devtoolset-9/enable\n\n# version info\n$gdb --version\nGNU gdb (GDB) Red Hat Enterprise Linux 8.3-3.el7\n")),(0,r.kt)("h3",{id:"set-up-the-lldb-debugging-environment"},"Set up the lldb debugging environment"),(0,r.kt)("h4",{id:"centos-7-1"},"CentOS 7"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# install llvm-toolset-7.0-lldb with yum\n$yum install llvm-toolset-7.0-lldb\n\n# use llvm-toolset-7\n$source /opt/rh/llvm-toolset-7.0/enable\n\n# version info\n$lldb --version\nlldb version 7.0.1\n")),(0,r.kt)("h2",{id:"configuration-tool"},"Configuration tool"),(0,r.kt)("p",null,"Clone the ",(0,r.kt)("inlineCode",{parentName:"p"},"andb")," repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$git clone git@github.com:noslate-project/andb.git\n")),(0,r.kt)("p",null,"Add the ",(0,r.kt)("inlineCode",{parentName:"p"},"andb")," environment variable"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$cd andb\n$source env.sh\nandb loader enabled, please use 'andb' command to start debugging.\n")),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"andb")," to check the paths used"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$andb\n~/demo/andb/loader\n")),(0,r.kt)("h2",{id:"general-debugging"},"General debugging"),(0,r.kt)("p",null,"Debug with ",(0,r.kt)("inlineCode",{parentName:"p"},"gdb")," and load the core.pid file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$andb -l -c core.pid\n")),(0,r.kt)("p",null,"Debug with ",(0,r.kt)("inlineCode",{parentName:"p"},"lldb")," and load the core.pid file."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$andb -g -c core.<pid>\n")),(0,r.kt)("h2",{id:"manual-tuning-method"},"Manual tuning method"),(0,r.kt)("p",null,"When debugging core files of unofficial distributions, manual debugging methods are required. At this time, the following files need to be prepared and placed in the same directory."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Companion binaries, such as node, must be paired with the core.pid file."),(0,r.kt)("li",{parentName:"ul"},"Companion node.typ file, you can also directly use the same version of the node.typ file as the official release."),(0,r.kt)("li",{parentName:"ul"},"core.pid file")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# Debug with gdb\n$andb -g node -c core.pid\n\n# or debug with lldb\n$andb -l node -c core.pid\n")))}p.isMDXComponent=!0}}]);