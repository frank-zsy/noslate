"use strict";(self.webpackChunknoslate_website=self.webpackChunknoslate_website||[]).push([[7284],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>v});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(t),v=r,b=p["".concat(s,".").concat(v)]||p[v]||u[v]||o;return t?a.createElement(b,i(i({ref:n},d),{},{components:t})):a.createElement(b,i({ref:n},d))}));function v(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=p;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3445:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=t(7462),r=(t(7294),t(3905));const o={},i="v8 \u547d\u4ee4",l={unversionedId:"debugger/andb/v8",id:"debugger/andb/v8",title:"v8 \u547d\u4ee4",description:"v8 version",source:"@site/docs/debugger/andb/v8.md",sourceDirName:"debugger/andb",slug:"/debugger/andb/v8",permalink:"/docs/debugger/andb/v8",draft:!1,editUrl:"https://github.com/noslate-project/noslate/tree/main/site/docs/debugger/andb/v8.md",tags:[],version:"current",frontMatter:{},sidebar:"debugger",previous:{title:"isolate \u547d\u4ee4",permalink:"/docs/debugger/andb/isolate"},next:{title:"heap \u547d\u4ee4",permalink:"/docs/debugger/andb/heap"}},s={},c=[{value:"v8 version",id:"v8-version",level:2},{value:"v8 inspect / object",id:"v8-inspect--object",level:2},{value:"v8 bt",id:"v8-bt",level:2}],d={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"v8-\u547d\u4ee4"},"v8 \u547d\u4ee4"),(0,r.kt)("h2",{id:"v8-version"},"v8 version"),(0,r.kt)("p",null,"\u663e\u793a\u5f53\u524d V8 \u5f15\u64ce\u7684\u7248\u672c\u4fe1\u606f\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"v8 version ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) v8 version\n8.4.371.23\n8.4.371.23-node.85\n")),(0,r.kt)("h2",{id:"v8-inspect--object"},"v8 inspect / object"),(0,r.kt)("p",null,"\u7c7b\u4f3c\u4e8e d8 \u663e\u793a\u5bf9\u8c61\u7684\u8be6\u7ec6\u89e3\u6790\u4fe1\u606f\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"v8 inspect ","[tagging]"),(0,r.kt)("li",{parentName:"ul"},"v8 object ","[address]")),(0,r.kt)("p",null,"Tagging Pointer \u662f V8 \u5f15\u64ce\u7684\u5bf9\u8c61\u6307\u9488\uff0c\u7c7b\u4f3c\u4e8e c/c++ \u7684\u6307\u9488. V8 \u5728\u5206\u914d\u5bf9\u8c61\u65f6\uff0c\u4f1a\u59cb\u7ec8\u6309\u7167\u5b57\u5bbd\u5bf9\u9f50\u5730\u5740\uff0c\u6240\u4ee5\u4f7f\u5f97\u6307\u9488\u7684\u6700\u4f4e2\u4f4d\u59cb\u7ec8\u4e3a\u96f6\uff0c\u6240\u4ee5\u88ab\u7528\u4e8e\u6807\u8bc6\u989d\u5916\u7684\u4fe1\u606f\u3002\n\u5176\u6700\u4f4e\u4f4d\u4e3a1\u8868\u793a\u662f\u4e00\u4e2a Tagging Pointer\uff0c0\u8868\u793a\u662f\u4e00\u4e2a Smi\u3002\u6b21\u4f4e\u4f4d\u662f Strong / Weak \u5f15\u7528\u6807\u8bc6\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"            |----- 32 bits -----|----- 32 bits -----|\nPointer:    |________________address______________w1|\nSmi:        |____int32_value____|0000000000000000000|\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"v8 inspect")," \u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"v8 object")," \u547d\u4ee4\u884c\u7684\u533a\u522b\u5728\u4e8e\uff0c\u53c2\u6570\u662f\u5426\u4e3a\u4e00\u4e2a Tagging Pointer \u6216\u8005\u662f \u5bf9\u8c61\u7684\u5185\u5b58\u5730\u5740\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) v8 i 0xe953aa7729\n[JSObject 0xe953aa7729]\n- Properties:\n - variables: <JsObject 0xe953ab2389>\n - target_defaults: <JsObject 0xe953ab2349>\n- Elements: []\n[Map 0x2048032e79a9]\n- InstanceSizeInWords: 5\n- InobjectPropertiesStartOrConstructorFunctionIndex: 3\n- UsedOrUnusedInstanceSizeInWords: 5\n- VisitorId: 25\n- InstanceType: JS_OBJECT_TYPE (1057)\n- BitField: 0x0\n[MapBitFields1 0x0]\n- HasNonInstancePrototype: 0\n- IsCallable: 0\n- HasNamedInterceptor: 0\n- HasIndexedInterceptor: 0\n- IsUndetectable: 0\n- IsAccessCheckNeeded: 0\n- IsConstructor: 0\n- HasPrototypeSlot: 0\n- BitField2: 0x19\n[MapBitFields2 0x19]\n- NewTargetIsBase: 1\n- IsImmutablePrototype: 0\n- Unused: 0\n- ElementsKind: HOLEY_ELEMENTS (3)\n- BitField3: 0x8400bff\n[MapBitFields3 0x8400bff]\n- EnumLength: 1023\n- NumberOfOwnDescriptors: 2\n- IsPrototypeMap: 0\n- IsDictionaryMap: 0\n- OwnsDescriptors: 1\n- IsInRetainedMapList: 0\n- IsDeprecated: 0\n- IsUnstable: 0\n- IsMigrationTarget: 0\n- IsExtensible: 1\n- MayHaveIntrestingSymbols: 0\n- ConstructionCounter: 0\n- Prototype: <JsObject 0x11eb600c0931>\n- ConstructorOrBackPointerOrNativeContext: <Map 0x2048032e7961>\n- InstanceDescriptors: <DescriptorArray 0x368e672facf1>\n- DependentCode: <WeakFixedArray 0xb6f27200289>\n- PrototypeValidityCell: <Cell 0x2d2cd9700661>\n- TransitionsOrPrototypeInfo: <Smi 0 0x0>\n[HeapObject]\n - MapWord: 0x2048032e79a9\n - Size: 40\n - Page: 0xe953a80000\n   - NextObject: 0xe953aa7751\n")),(0,r.kt)("h2",{id:"v8-bt"},"v8 bt"),(0,r.kt)("p",null,"\u663e\u793a v8 \u8c03\u7528\u6808\u3002"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"v8 bt")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) v8 bt\n#0  0x00000e5ce6f04010 home(this=<JsObject 0x620f5fe24e9>) at /disks/banana/zlei/alibaba/andb/test/backtrace/deadloop/dist/controller/home.controller.js:0\n#1  0x0000000001462119 <arguments_adaptor>()\n#2  0x00000000014681e2 (anonymous)(this=<Oddball 0x5d12f880471>, arg0=<JsObject 0x620f5fc8421>, arg1=<JsBoundFunction 0x620f5fe1c39>) at /disks/banana/zlei/alibaba/andb/test/backtrace/deadloop/node_modules/@midwayjs/core/dist/common/webGenerator.js:0\n#3  0x0000000001494db0 (anonymous)(this=<JsGlobalProxy 0x12b3e36823e1>, arg0=<JsObject 0x620f5fe24e9>) at undefined:1489\n#4  0x00000000015110ee <stub>()\n#5  0x0000000001487eda <stub>()\n#6  0x0000000001465e58 <entry>()\n#7  0x0000000000d2863b v8::internal::(anonymous namespace)::Invoke(v8::internal::Isolate*, v8::internal::(anonymous namespace)::InvokeParams const&)()\n#8  0x0000000000d29553 v8::internal::Execution::TryRunMicrotasks(v8::internal::Isolate*, v8::internal::MicrotaskQueue*, v8::internal::MaybeHandle<v8::internal::Object>*)()\n#9  0x0000000000d52be1 v8::internal::MicrotaskQueue::RunMicrotasks(v8::internal::Isolate*)()\n#10 0x0000000000d52fc1 v8::internal::MicrotaskQueue::PerformCheckpoint(v8::Isolate*)()\n#11 0x0000000000c38261 v8::internal::MaybeHandle<v8::internal::Object> v8::internal::(anonymous namespace)::HandleApiCallHelper<false>(v8::internal::Isolate*, v8::internal::Handle<v8::internal::HeapObject>, v8::internal::Handle<v8::internal::HeapObject>, v8::internal::Handle<v8::internal::FunctionTemplateInfo>, v8::internal::Handle<v8::internal::Object>, v8::internal::BuiltinArguments)()\n#12 0x0000000000c39eff v8::internal::Builtin_HandleApiCall(int, unsigned long*, v8::internal::Isolate*)()\n#13 0x00000000014cf459 <builtin_exit>()\n#14 0x00000000014681e2 processTicksAndRejections(this=<JsApiObject 0x12b3e3681d81>) at internal/process/task_queues.js:0\n#15 0x0000000001465efa <internal>()\n#16 0x0000000001465cd8 <entry>()\n#17 0x0000000000d281e1 v8::internal::(anonymous namespace)::Invoke(v8::internal::Isolate*, v8::internal::(anonymous namespace)::InvokeParams const&)()\n#18 0x0000000000d2900f v8::internal::Execution::Call(v8::internal::Isolate*, v8::internal::Handle<v8::internal::Object>, v8::internal::Handle<v8::internal::Object>, int, v8::internal::Handle<v8::internal::Object>*)()\n#19 0x0000000000bd4879 v8::Function::Call(v8::Local<v8::Context>, v8::Local<v8::Value>, int, v8::Local<v8::Value>*)()\n#20 0x000000000098af6e node::InternalCallbackScope::Close()()\n#21 0x000000000098c172 node::InternalMakeCallback(node::Environment*, v8::Local<v8::Object>, v8::Local<v8::Object>, v8::Local<v8::Function>, int, v8::Local<v8::Value>*, node::async_context)()\n#22 0x000000000099ae06 node::AsyncWrap::MakeCallback(v8::Local<v8::Function>, int, v8::Local<v8::Value>*)()\n#23 0x0000000000a473cd non-virtual thunk to node::(anonymous namespace)::Parser::OnStreamRead(long, uv_buf_t const&)()\n#24 0x0000000000b0fcbc node::LibuvStreamWrap::ReadStart()::{lambda(uv_stream_s*, long, uv_buf_t const*)#2}::_FUN(uv_stream_s*, long, uv_buf_t const*)()\n#25 0x00000000014551d2 uv__read(stream=<optimized out>) at ../deps/uv/src/unix/stream.c:1259\n#26 0x00000000014558d8 uv__stream_io(loop=<optimized out>, w=<optimized out>, events=<optimized out>) at ../deps/uv/src/unix/stream.c:1326\n#27 0x000000000145c2e5 uv__io_poll(loop=<optimized out>, timeout=<optimized out>) at ../deps/uv/src/unix/linux-core.c:472\n#28 0x0000000001449595 uv_run(loop=<optimized out>, mode=<optimized out>) at ../deps/uv/src/unix/core.c:394\n#29 0x0000000000a6fef5 node::NodeMainInstance::Run()()\n#30 0x00000000009f7c41 node::Start(int, char**)()\n#31 0x00007f71ae0fe445 __libc_start_main(main=0x9885b0 <main>, argc=2, argv=0x7fff155e5378, init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>, stack_end=0x7fff155e5368) at ../csu/libc-start.c:266\n#32 0x0000000000989c5d _start()\n")))}u.isMDXComponent=!0}}]);